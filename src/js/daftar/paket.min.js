var jumlah_paket,display_per_page=20,lev=$("#key").val();function delete_paket(data){var ajax=get_ajax_response("daftar/paket/delete","post","hapus_paket",{id:data[1]});process_ajax(ajax,"init_filter")}function get_daftar_paket(data){var ajax=get_ajax_response("daftar/paket/get_paket_list","get","daftar_paket",data);$.when(ajax).done((function(response){$("div.pagination").empty(),$tbody.empty().css("display","none");for(var length=response.length,i=0;i<length;i++){var no=data.page*display_per_page+i+1,id_paket=response[i].id_paket,kode_paket=response[i].kode_paket,nama_paket=response[i].nama_paket,nilai_paket=if_empty_then(response[i].nilai_paket,"number",!1,"∞"),periode=null===response[i].periode?"∞":response[i].periode.split(" ");if("∞"!==periode)switch(periode[1]){case"H":periode=periode[0]+" Hari";break;case"B":periode=periode[0]+" Bulan";break;case"T":periode=periode[0]+" Tahun"}var bank_list=""===response[i].bank_list?"-":response[i].bank_list.split("#"),bank_list1="-";if("-"!==bank_list){bank_list1="<select>";for(var length1=bank_list.length,j=0;j<length1;j++){var an,no_rek;bank_list1+="<option>"+bank_list[j].split("|")[1]+" / "+bank_list[j].split("|")[2]+"</option>"}bank_list1+="</select>"}var tr="             <tr class='border'>                 <td>"+no+"</td>                 <td>                     <a href='"+base_url+"master/paket?id="+id_paket+"'>Edit</a>                    "+(0==lev?"":" | <a href='#' class='delete_link' data-dialog='"+id_paket+"#"+kode_paket+"'>Hapus</a>")+"                 </td>                 <td>"+kode_paket+"</td>                 <td>"+nama_paket+"</td>                 <td>"+nilai_paket+"</td>                 <td>"+periode+"</td>                 <td>"+bank_list1+"</td>             </tr>";$tbody.append(tr)}$tbody.fadeIn(400,(function(){create_paginations(data.page,jumlah_paket,display_per_page,"#"+data.filter)}))}))}function get_total_paket(data){var ajax=get_ajax_response("daftar/paket/get_paket_list","get","total_paket",data);$.when(ajax).done((function(response){jumlah_paket=response,$("caption").fadeOut(400,(function(){$(this).html("Jumlah Paket: "+convert_number_tocurrency(jumlah_paket)).fadeIn()}))}))}function init_filter(){var data={filter:$("input.search_field").val()};get_total_paket(data),data.page=0,data.display_per_page=display_per_page,get_daftar_paket(data)}function init_table_style(){var data;get_responsive_style("table","table.tb_daftar",{padding_left:"95"})}$tbody=$("table.tb_daftar tbody"),$(document).ready((function(){init_table_style(),init_filter(),$("span.search_icon").on("click",(function(){init_filter()})),$("input.search_field").on("keyup",(function(e){13===e.keyCode&&init_filter()})),$("body").on("click","a.delete_link",(function(){var kode_paket=$(this).data("dialog").split("#")[1];data=["warning","Apakah anda yakin ingin menghapus paket <i>"+kode_paket+"</i>?<br>Data yang dihapus tidak dapat dikembalikan!","delete_paket#"+$(this).data("dialog")],$(this).after(create_dialog("confirm",data)).next().slideDown()})),$("body").on("click","a.link_pagination",(function(){var filter,page,data;get_daftar_paket({filter:$(this).data("pagination").split("#")[1],page:parseInt($(this).data("pagination").split("#")[0]),display_per_page:display_per_page})}))}));